---
sidebar_position: 0
---
# 快速入门

语言模型以文本作为输入，这个文本通常被称为提示。通常情况下，这不仅仅是一个硬编码的字符串，而是一个模板、一些示例和用户输入的组合。LangChain提供了几个类和函数，使得构建和处理提示变得容易。

## 什么是提示模板？

提示模板指的是一种可重复生成提示的方法。它包含一个文本字符串（“模板”），可以接收来自最终用户的一组参数，并生成一个提示。

提示模板可以包含：

- 对语言模型的指示
- 一组少量示例以帮助语言模型生成更好的响应
- 向语言模型提出的问题

这里有一个简单的例子：

```typescript
import { PromptTemplate } from "@langchain/core/prompts";

// 如果传入一个模板，则输入变量将从模板中自动推断。
const prompt = PromptTemplate.fromTemplate(
  `You are a naming consultant for new companies.
What is a good name for a company that makes {product}?`
);

const formattedPrompt = await prompt.format({
  product: "colorful socks",
});

/*
  You are a naming consultant for new companies.
  What is a good name for a company that makes colorful socks?
*/
```

## 创建提示模板

您可以使用`PromptTemplate`类创建简单的硬编码提示。`PromptTemplate`可以接受任意数量的输入变量，并可以格式化以生成提示。


```typescript
import { PromptTemplate } from "@langchain/core/prompts";

// 一个没有输入变量的示例提示
const noInputPrompt = new PromptTemplate({
  inputVariables: [],
  template: "Tell me a joke.",
});
const formattedNoInputPrompt = await noInputPrompt.format();

console.log(formattedNoInputPrompt);
// "Tell me a joke."

// 一个带有一个输入变量的示例提示
const oneInputPrompt = new PromptTemplate({
  inputVariables: ["adjective"],
  template: "Tell me a {adjective} joke.",
});
const formattedOneInputPrompt = await oneInputPrompt.format({
  adjective: "funny",
});

console.log(formattedOneInputPrompt);
// "Tell me a funny joke."

// 一个带有多个输入变量的示例提示
const multipleInputPrompt = new PromptTemplate({
  inputVariables: ["adjective", "content"],
  template: "Tell me a {adjective} joke about {content}.",
});
const formattedMultipleInputPrompt = await multipleInputPrompt.format({
  adjective: "funny",
  content: "chickens",
});

console.log(formattedMultipleInputPrompt);
// "Tell me a funny joke about chickens."
```

如果您不想手动指定`inputVariables`，您也可以使用`fromTemplate`类方法创建`PromptTemplate`。LangChain将根据传递的`template`自动推断`inputVariables`。

```typescript
import { PromptTemplate } from "@langchain/core/prompts";

const template = "Tell me a {adjective} joke about {content}.";

const promptTemplate = PromptTemplate.fromTemplate(template);
console.log(promptTemplate.inputVariables);
// ['adjective', 'content']
const formattedPromptTemplate = await promptTemplate.format({
  adjective: "funny",
  content: "chickens",
});
console.log(formattedPromptTemplate);
// "Tell me a funny joke about chickens."
```

您可以创建自定义的提示模板，以任何您想要的方式格式化提示。

## 聊天提示模板

[聊天模型](/docs/modules/model_io/chat)将聊天消息列表作为输入 - 这个列表通常被称为`prompt`。
这些聊天消息与原始字符串不同（您会将其传递给[LLM](/docs/modules/model_io/llms)），因为每条消息都与一个`角色`相关联。

例如，在OpenAI的[Chat Completion API](https://platform.openai.com/docs/guides/chat/introduction)中，一个聊天消息可以与AI、人类或系统角色相关联。模型应该更密切地遵循系统聊天消息的指示。

LangChain提供了几个提示模板，以便轻松构建和处理提示。在调用聊天模型时，建议您使用这些与聊天相关的提示模板，而不是`PromptTemplate`，以充分发掘模型的潜力。

```typescript
import {
  ChatPromptTemplate,
  PromptTemplate,
  SystemMessagePromptTemplate,
  AIMessagePromptTemplate,
  HumanMessagePromptTemplate,
} from "@langchain/core/prompts";
import {
  AIMessage,
  HumanMessage,
  SystemMessage,
} from "@langchain/core/messages";
```

要创建与角色相关联的消息模板，您可以使用相应的`<ROLE>MessagePromptTemplate`。

为了方便起见，您还可以将消息提示模板声明为元组。这些将被强制转换为正确的提示模板类型：


```typescript
const systemTemplate =
  "You are a helpful assistant that translates {input_language} to {output_language}.";
const humanTemplate = "{text}";

const chatPrompt = ChatPromptTemplate.fromMessages([
  ["system", systemTemplate],
  ["human", humanTemplate],
]);

// 格式化消息
const formattedChatPrompt = await chatPrompt.formatMessages({
  input_language: "English",
  output_language: "French",
  text: "I love programming.",
});

console.log(formattedChatPrompt);

/*
  [
    SystemMessage {
      content: 'You are a helpful assistant that translates English to French.'
    },
    HumanMessage {
      content: 'I love programming.'
    }
  ]
*/
```

您还可以使用`ChatPromptTemplate`的`.formatPromptValue()`方法 - 这将返回一个`PromptValue`，您可以将其转换为字符串或Message对象
,取决于您是否希望将格式化的值用作LLM或聊天模型的输入。

如果您更喜欢使用消息类，这些类上暴露了一个`fromTemplate`方法。
它看起来是这样的：

```typescript
const template =
  "You are a helpful assistant that translates {input_language} to {output_language}.";
const systemMessagePrompt = SystemMessagePromptTemplate.fromTemplate(template);
const humanTemplate = "{text}";
const humanMessagePrompt =
  HumanMessagePromptTemplate.fromTemplate(humanTemplate);
```

如果您想更直接地构建`MessagePromptTemplate`，您可以在外部创建一个PromptTemplate，然后传递进去，例如：

```typescript
const prompt = new PromptTemplate({
  template:
    "You are a helpful assistant that translates {input_language} to {output_language}.",
  inputVariables: ["input_language", "output_language"],
});
const systemMessagePrompt2 = new SystemMessagePromptTemplate({
  prompt,
});
```

**注意：** 如果使用TypeScript，您可以通过传递一个类型参数来为使用`.fromMessages`创建的提示添加类型，像这样：

```typescript
const chatPrompt = ChatPromptTemplate.fromMessages<{
  input_language: string;
  output_language: string;
  text: string;
}>([systemMessagePrompt, humanMessagePrompt]);
```

## 多模态提示

import CodeBlock from "@theme/CodeBlock";
import MultiModalPromptExample from "@examples/prompts/multi\_modal.ts";

<CodeBlock language="typescript">{MultiModalPromptExample}</CodeBlock>

:::tip
LangSmith将在追踪内呈现您的图像！

查看LangSmith追踪[此处](https://smith.langchain.com/public/15f4b4e4-2b2f-476a-952c-b9abcb9ac278/r)
:::

您还可以内联传递多模态提示模板：

import MultiModalInlinePromptExample from "@examples/prompts/multi\_modal\_inline.ts";

<CodeBlock language="typescript">{MultiModalInlinePromptExample}</CodeBlock>

:::tip
查看LangSmith追踪[此处](https://smith.langchain.com/public/66bf8258-fa1c-42a3-9e14-9b3eb5902435/r)
:::

