# 与 LangServe 集成

[LangServe](https://python.langchain.com/docs/langserve) 是一个 Python 框架，它帮助开发者将 LangChain [可运行和链](/docs/expression_language/)
作为 REST APIs 部署。

如果您有一个部署的 LangServe 路由，您可以使用 [RemoteRunnable](https://api.js.langchain.com/classes/langchain_core_runnables_remote.RemoteRunnable.html) 类来与之交互，
就像它是本地链一样。这允许您更轻松地从 JavaScript 环境中调用托管的 LangServe 实例（如在浏览器前端）。

## 设置

您需要将 LangChain 核心安装或打包到您的前端：

```bash npm2yarn
npm install @langchain/core
```

如果您从浏览器调用 LangServe 端点，您需要确保您的服务器返回 CORS 头。
您可以使用 FastAPI 的内置中间件来实现这一点：

```python
from fastapi.middleware.cors import CORSMiddleware

# 设置所有启用 CORS 的来源
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
    expose_headers=["*"],
)
```

## 使用

然后，您可以使用任何支持的 [LCEL 接口方法](/docs/expression_language/interface)。
以下是示例代码：

import CodeBlock from "@theme/CodeBlock";
import Example from "@examples/ecosystem/langsmith.ts";

<CodeBlock language="typescript">{Example}</CodeBlock>

[`streamEvents`](/docs/expression_language/interface) 允许您将链的中间步骤作为事件流式传输，例如 `on_llm_start` 和 `on_chain_stream`。
请参阅[这里](/docs/expression_language/interface#stream-events)的表格以获取您可以处理的事件的完整列表。
此方法还允许一些额外的选项，以便只包括或排除某些命名的步骤：

import StreamEventsExample from "@examples/ecosystem/langsmith\_stream\_events.ts";

<CodeBlock language="typescript">{StreamEventsExample}</CodeBlock>

[`streamLog`](/docs/expression_language/interface) 是一个更底层的用于将链的中间步骤作为部分 JSONPatch 块流式传输的方法。
与 `streamEvents` 一样，此方法还允许一些额外的选项，以便只包括或排除某些命名的步骤：

import StreamLogExample from "@examples/ecosystem/langsmith\_stream\_log.ts";

<CodeBlock language="typescript">{StreamLogExample}</CodeBlock>

### 配置

您还可以在构造函数中传递用于头部和超时的选项。这些将在进行传入请求时使用：

import OptionsExample from "@examples/ecosystem/langsmith\_options.ts";

<CodeBlock language="typescript">{OptionsExample}</CodeBlock>


