---
sidebar_position: 1
---
# 安装

## 支持的环境

LangChain 是用 TypeScript 编写的，可以在以下环境中使用：

- Node.js (ESM 和 CommonJS) - 18.x, 19.x, 20.x
- Cloudflare Workers
- Vercel / Next.js (浏览器、无服务器和边缘函数)
- Supabase Edge Functions
- 浏览器
- Deno
- Bun

然而，请注意，并非所有环境都支持单个集成。

## 安装

首先，使用以下命令安装 LangChain：

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

<Tabs>
  <TabItem value="npm" label="npm" default>
    <CodeBlock language="bash">npm install -S langchain</CodeBlock>
  </TabItem>
  <TabItem value="yarn" label="Yarn">
    <CodeBlock language="bash">yarn add langchain</CodeBlock>
  </TabItem>
  <TabItem value="pnpm" label="pnpm">
    <CodeBlock language="bash">pnpm add langchain</CodeBlock>
  </TabItem>
</Tabs>

### TypeScript

LangChain 是用 TypeScript 编写的，并为其所有公共 API 提供了类型定义。

## 安装集成包

LangChain 支持包含特定模块集成的第三方提供商的包。
它们可以像只包含 Google AI Studio 模型集成的 [`@langchain/google-genai`](/docs/integrations/platforms/google#chatgooglegenerativeai) 那样具体，
也可以像包含更广泛社区贡献集成的 [`@langchain/community`](https://www.npmjs.com/package/@langchain/community) 那样广泛。

这些包以及主要的 LangChain 包都依赖于 [`@langchain/core`](https://www.npmjs.com/package/@langchain/core)，后者包含这些集成包扩展的基本抽象。

为了确保所有的集成及其类型能够正确地相互交互，它们都必须使用相同版本的 `@langchain/core`。
确保这一点的最佳方法是在项目的 `package.json` 中添加一个 `"resolutions"` 或 `"overrides"` 字段。名称将取决于您的包管理器：

:::tip
对于 `yarn` 或 `pnpm` 的 `resolutions` 或 `pnpm.overrides` 字段必须设置在根 `package.json` 文件中。
:::

如果您使用 `yarn`：

```json title="yarn package.json"
{
  "name": "your-project",
  "version": "0.0.0",
  "private": true,
  "engines": {
    "node": ">=18"
  },
  "dependencies": {
    "@langchain/google-genai": "^0.0.2",
    "langchain": "0.0.207"
  },
  "resolutions": {
    "@langchain/core": "0.1.5"
  }
}
```

或者对于 `npm`：

```json title="npm package.json"
{
  "name": "your-project",
  "version": "0.0.0",
  "private": true,
  "engines": {
    "node": ">=18"
  },
  "dependencies": {
    "@langchain/google-genai": "^0.0.2",
    "langchain": "0.0.207"
  },
  "overrides": {
    "@langchain/core": "0.1.5"
  }
}
```

或者对于 `pnpm`：

```json title="pnpm package.json"
{
  "name": "your-project",
  "version": "0.0.0",
  "private": true,
  "engines": {
    "node": ">=18"
  },
  "dependencies": {
    "@langchain/google-genai": "^0.0.2",
    "langchain": "0.0.207"
  },
  "pnpm": {
    "overrides": {
      "@langchain/core": "0.1.5"
    }
  }
}
```

### @langchain/community

[@langchain/community](https://www.npmjs.com/package/@langchain/community) 包含第三方集成。
它会在安装 `langchain` 时自动安装，但也可以单独与 `@langchain/core` 一起使用。安装方式如下：

```bash npm2yarn
npm install @langchain/community
```

### @langchain/core

[@langchain/core](https://www.npmjs.com/package/@langchain/core) 包含了 LangChain 生态系统使用的基础抽象以及 LangChain 表达式语言。
它会在安装 `langchain` 时自动安装，但也可以单独使用。安装方式如下：

```bash npm2yarn
npm install @langchain/core
```

导入 IntegrationInstallTooltip from "@mdx\_components/integration\_install\_tooltip.mdx";

<IntegrationInstallTooltip></IntegrationInstallTooltip>

## 加载库

### ESM

LangChain 为 Node.js 环境提供了 ESM 构建版本。您可以使用以下语法导入它：

```bash npm2yarn
npm install @langchain/openai
```

```typescript
import { OpenAI } from "@langchain/openai";
```

如果您在 ESM 项目中使用 TypeScript，我们建议您更新 `tsconfig.json` 以包含以下内容：

```json title="tsconfig.json"
{
  "compilerOptions": {
    ...
    "target": "ES2020", // 或更高
    "module": "nodenext",
  }
}
```

### CommonJS

LangChain 为 Node.js 环境提供了 CommonJS 构建版本。您可以使用以下语法导入它：

```typescript
const { OpenAI } = require("@langchain/openai");
```

### Cloudflare Workers

LangChain 可以在 Cloudflare Workers 中使用。您可以使用以下语法导入它：

```typescript
import { OpenAI } from "@langchain/openai";
```

### Vercel / Next.js

LangChain 可以在 Vercel / Next.js 中使用。我们支持在前端组件、无服务器函数和边缘函数中使用 LangChain。您可以使用以下语法导入它：

```typescript
import { OpenAI } from "@langchain/openai";
```

### Deno / Supabase Edge Functions

LangChain 可以在 Deno / Supabase Edge Functions 中使用。您可以使用以下语法导入它：

```typescript
import { OpenAI } from "https://esm.sh/@langchain/openai";
```

或

```typescript
import { OpenAI } from "npm:@langchain/openai";
```

我们建议查看我们的 [Supabase 模板](https://github.com/langchain-ai/langchain-template-supabase)，了解如何在 Supabase Edge Functions 中使用 LangChain 的示例。

### 浏览器

LangChain 可以在浏览器中使用。在我们的 CI 中，我们测试使用 Webpack 和 Vite 打包 LangChain，但其他打包工具也应该有效。您可以使用以下语法导入它：

```typescript
import { OpenAI } from "@langchain/openai";
```

## 不支持：Node.js 16

我们不支持 Node.js 16，但如果你仍然想在 Node.js 16 上运行 LangChain，你需要遵循本节的说明。我们不保证这些说明在未来仍然有效。

您需要将 `fetch` 全局可用，要么：

- 使用 `NODE_OPTIONS='--experimental-fetch' node ...` 运行你的应用程序，或
- 安装 `node-fetch` 并遵循[这里](https://github.com/node-fetch/node-fetch#providing-global-access)的说明

你还需要[填充 `ReadableStream`](https://www.npmjs.com/package/web-streams-polyfill)：

```bash npm2yarn
npm i web-streams-polyfill
```

然后在你的主入口点将其添加到全局命名空间：

```typescript
import "web-streams-polyfill/es6";
```

此外，你还需要填充 `structuredClone`，例如通过安装 `core-js` 并遵循[这里](https://github.com/zloirock/core-js)的说明。

如果你运行的是 Node.js 18+，则不需要做任何事情。



